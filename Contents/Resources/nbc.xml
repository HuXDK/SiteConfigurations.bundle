<?xml version="1.0" encoding="UTF-8"?>
<site site="http://www.nbc.com"
	    plugin="http://www.nbc.com/assets/video/3-0/swf/NBCVideoApp.swf"
       initialState="wait-for-start"
			version="1.0">
			
	<crop x="164" y="65" width="640" height="360" />

	<seekbar type="simple">
		<start x="360" y="446" />
		<end   x="590" y="446" />
		<played>
				<color rgb="474745" />
                <color rgb="2e90a1" />
				<color rgb="15dafd" />
				<color rgb="61615f" />
				<color rgb="7b7b79" />
		</played>
	</seekbar>

	<!-- Set Colors for Paused Video -->
  <condition name="paused">
		<and>
			<color x="207"  y="444" rgb="00ccff" />
			<color x="205"  y="444" rgb="00ccff" />
			<color x="205"  y="446" rgb="00ccff" />
    </and>
	</condition>
    
	<!-- PLAYING -->
		<state name="wait-for-start">
			<event>
				<condition>
					<and>
						<color x="244" y="443" rgb="ffffff" />
						<color x="244" y="437" rgb="424240" />
					</and>
				</condition>
				<action>
					<click x="345" y="443" />
					<goto state="playing" />
				</action>
			</event>
		</state>

<!-- PLAYING -->
	<state name="playing">
		
<!-- Click to pause -->
		<event>
			<condition>
				<command name="pause" />
			</condition>
			<action>
				<click x="205" y="448" />
			</action>
		</event>

<!-- Detect paused video -->
		<event>
			<condition>
				<condition name="paused" />
			</condition>
			<action>
				<goto state="paused" />
			</action>
		</event>
		
		<!-- Video ends -->
		<event>
			<condition>
				<color x="592" y="449" rgb="15DAFD" />
			</condition>
			<action>
			  <pause time="2000" />
				<goto state="end" />
			</action>
		</event>
	</state>
	
<!-- PAUSED -->
	<state name="paused">
		<event>
			<condition>
				<command name="play" />
			</condition>
			<action>
				<click x="205" y="448" />
			</action>
		</event>
        		
<!-- Go To Playing -->
		<event>
			<condition>
				<not>
					<condition name="paused" />
				</not>
			</condition>
			<action>
				<goto state="playing" />
            </action>
        </event>
	</state>
</site>
